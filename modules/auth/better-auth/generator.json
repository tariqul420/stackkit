{
  "name": "better-auth",
  "type": "auth",
  "priority": 10,
  "operations": [
    {
      "type": "create-file",
      "description": "Create Better Auth configuration file",
      "source": "lib/auth.ts",
      "destination": "lib/auth.ts",
      "condition": { "framework": ["nextjs", "express"] }
    },
    {
      "type": "create-file",
      "description": "Create email service for sending emails",
      "source": "lib/email-service.ts",
      "destination": "lib/email/email-service.ts",
      "condition": { "framework": ["nextjs", "express"] }
    },
    {
      "type": "create-file",
      "description": "Create email templates",
      "source": "lib/email-templates.ts",
      "destination": "lib/email/email-templates.ts",
      "condition": { "framework": ["nextjs", "express"] }
    },
    {
      "type": "create-file",
      "description": "Create Better Auth API routes for Next.js",
      "source": "api/auth/[...all]/route.ts",
      "destination": "app/api/auth/[...all]/route.ts",
      "condition": { "framework": "nextjs" }
    },
    {
      "type": "create-file",
      "description": "Create Better Auth client for React",
      "source": "lib/auth-client.ts",
      "destination": "lib/auth-client.ts",
      "condition": { "framework": ["nextjs", "react-vite"] }
    },
    {
      "type": "create-file",
      "description": "Create Better Auth middleware for Next.js",
      "destination": "proxy.ts",
      "condition": { "framework": "nextjs" },
      "content": "import { auth } from \"@/lib/auth\";\n\nexport default auth((req) => {\n  console.log('middleware', req.auth)\n})\n\nexport const config = {\n  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],\n}"
    },
    {
      "type": "patch-file",
      "description": "Add Better Auth routes to Express app",
      "file": "src/app.ts",
      "condition": { "framework": "express" },
      "operations": [
        {
          "type": "add-import",
          "imports": [
            "import { auth } from \"@/lib/auth\";",
            "import { toNodeHandler } from \"better-auth/node\";"
          ]
        },
        {
          "type": "add-code",
          "after": "// routes",
          "code": "\napp.all(\"/api/auth/*splat\", toNodeHandler(auth));"
        }
      ]
    }
  ],
  "dependencies": {
    "better-auth": "^1.4.12",
    "nodemailer": "^7.0.12"
  },
  "devDependencies": {
    "@types/nodemailer": "^6.4.17"
  },
  "scripts": {},
  "envVars": {
    "BETTER_AUTH_SECRET": "",
    "BETTER_AUTH_URL": "http://localhost:3000",
    "EMAIL_HOST": "smtp.gmail.com",
    "EMAIL_PORT": "587",
    "EMAIL_USER": "",
    "EMAIL_PASS": "",
    "EMAIL_FROM": "noreply@yourapp.com"
  }
}