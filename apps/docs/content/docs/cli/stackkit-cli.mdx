---
title: stackkit-cli
description: Add modules to existing projects
---

import { Tab, Tabs } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';

# stackkit-cli

Add authentication, database, and other modules to existing projects.

## Usage

Run directly without installation:

```bash
npx stackkit-cli [command]
```

Or install globally:

```bash
npm install -g stackkit-cli
```

<Callout type="info">
  Run commands from your project root directory (where `package.json` is located).
</Callout>

## Commands

### `add`

Add a module to your project:

```bash
npx stackkit-cli add <module-type>
```

**Available modules:**
- `auth` - Authentication (Better Auth, Clerk)
- `database` - Database (Prisma, Mongoose)

### `add auth`

Add authentication to your project:

```bash
npx stackkit-cli add auth
```

The CLI will:
1. Detect your framework (Next.js, Express, or React)
2. Show compatible providers (Better Auth, Clerk)
3. Install dependencies and configure files

**Options:**
```bash
npx stackkit-cli add auth --provider better-auth  # Skip selection
npx stackkit-cli add auth --skip-install           # Don't install packages
```

### `add database`

Add database support to your project:

```bash
npx stackkit-cli add database
```

The CLI will:
1. Detect your framework
2. Show compatible adapters (Prisma, Mongoose)
3. Install dependencies and configure files

**Options:**
```bash
npx stackkit-cli add database --adapter prisma-postgresql  # Skip selection
npx stackkit-cli add database --skip-install                # Don't install packages
```

### `list`

List all available modules for your framework:

```bash
npx stackkit-cli list
```

### `info`

Get detailed information about a specific module:

```bash
npx stackkit-cli info <module-name>
```

Example:
```bash
npx stackkit-cli info better-auth-nextjs
```

Shows module description, compatible frameworks, dependencies, and setup steps.

### `--version, -v`

Display CLI version:

```bash
npx stackkit-cli --version
```

### `--help, -h`

Display help information:

```bash
npx stackkit-cli --help
npx stackkit-cli add --help
```

## How It Works

1. **Framework Detection** - Analyzes `package.json` to detect Next.js, Express, or React (Vite)
2. **Compatibility Check** - Shows only compatible modules for your framework
3. **Interactive Selection** - Choose from available options
4. **File Generation** - Creates configuration files and code
5. **Dependency Installation** - Adds packages to `package.json` and installs
6. **Environment Setup** - Updates `.env` with required variables

## Examples

### Add Authentication to Next.js

```bash
cd my-nextjs-app
npx stackkit-cli add auth
# Select: Better Auth
```

**Generated files:**
- `lib/auth.ts` - Better Auth configuration
- `app/api/auth/[...all]/route.ts` - Auth API routes
- `.env.local` - Environment variables

### Add Database to Express

```bash
cd my-express-api
npx stackkit-cli add database
# Select: Prisma (PostgreSQL)
```

**Generated files:**
- `prisma/schema.prisma` - Database schema
- `src/config/db.ts` - Prisma client
- `.env` - DATABASE_URL variable



## Module Compatibility

### Authentication Modules

| Module | Next.js | Express | React (Vite) |
|--------|---------|---------|--------------|
| Better Auth | ✅ | ✅ | ✅ |
| Clerk | ✅ | ✅ | ✅ |

### Database Modules

| Module | Next.js | Express | React (Vite) |
|--------|---------|---------|--------------|
| Prisma (PostgreSQL) | ✅ | ✅ | ❌ |
| Prisma (MongoDB) | ✅ | ✅ | ❌ |
| Mongoose (MongoDB) | ✅ | ✅ | ❌ |

<Callout type="info">
  React (Vite) is frontend-only, so database modules aren't compatible. Use Next.js or Express for full-stack applications with database access.
</Callout>

## Generated Files

### Authentication (Better Auth)

```
lib/auth.ts                  # Auth configuration
app/api/auth/[...all]/route.ts  # API endpoint (Next.js)
src/routes/auth.ts           # Auth routes (Express)
```

### Database (Prisma)

```
prisma/schema.prisma         # Database schema
prisma/migrations/           # Migration history
lib/db.ts                    # Prisma client (Next.js)
src/config/db.ts             # Prisma client (Express)
```

### Authentication (Clerk)

```
app/layout.tsx               # Updated with ClerkProvider (Next.js)
main.tsx                     # Updated with ClerkProvider (React)
```

## Post-Installation Setup

### Database (Prisma)

1. **Configure DATABASE_URL** in `.env`:
```bash
# PostgreSQL
DATABASE_URL="postgresql://user:password@localhost:5432/mydb"

# MongoDB
DATABASE_URL="mongodb://localhost:27017/mydb"
```

2. **Run migrations**:
```bash
npx prisma migrate dev --name init
npx prisma generate
```

### Authentication (Better Auth)

1. **Generate secret**:
```bash
openssl rand -base64 32
```

2. **Update `.env`**:
```bash
BETTER_AUTH_SECRET="your-generated-secret"
BETTER_AUTH_URL="http://localhost:3000"
```

### Authentication (Clerk)

Add Clerk keys to `.env`:
```bash
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_..."
CLERK_SECRET_KEY="sk_test_..."
```

## Common Issues

**Framework not detected**
```
Error: Unable to detect framework
```
Ensure `package.json` exists and contains framework dependencies (next, express, or vite+react).

**Module not compatible**
```
Error: This module is not compatible with your framework
```
Use `npx stackkit-cli list` to see available modules for your framework. React (Vite) doesn't support database modules.

**File already exists**
```
Error: File 'lib/auth.ts' already exists
```
The CLI won't overwrite files. Either remove the file or manually merge changes.

**Permission denied**
```
Error: EACCES: permission denied
```
Never use `sudo` with npm/npx. Check your project directory permissions.

## Best Practices

1. **Commit before adding modules** to track changes:
```bash
git add .
git commit -m "Before adding auth module"
```

2. **Test after installation**:
```bash
npm run dev
```

3. **Never commit `.env` files** - Keep secrets secure

4. **Read module documentation** - Check [Authentication](/docs/modules/auth) and [Database](/docs/modules/database) guides

## Next Steps

- [Authentication Setup](/docs/modules/auth) - Configure auth providers
- [Database Configuration](/docs/modules/database) - Set up your database
